from src.config import MODEL_DISPLAY_NAMES, MODELS

def get_system_prompt(target_title: str) -> str:
    """Base system prompt for wiki game."""
    return f'''You are playing the Wikipedia Game. Your goal is to navigate from the current article to the target article using only the hyperlinks in the article.

Target article: {target_title}

RULES:
1. You can only click links that appear in the current article
2. Each response must be EXACTLY ONE link in Markdown format: [link text](url)
3. Copy the link VERBATIM from the article - do not modify it
4. Do not add any other text, explanation, or commentary

IMPORTANT: Return ONLY the link, nothing else. Example response:
[Philosophy](https://en.wikipedia.org/wiki/Philosophy)'''

def get_user_prompt(current_title: str, article_markdown: str) -> str:
    """User prompt with current article content."""
    return f'''Current article: {current_title}

{article_markdown}'''

def get_peer_pressure_preamble(
    model_id: str,
    start_title: str,
    target_title: str,
    best_path_length: int,
    clicks_so_far: int
) -> str:
    """Peer pressure preamble added to system prompt.

    Lists all OTHER models (not the current one) as having achieved optimal.
    """
    other_models = [MODEL_DISPLAY_NAMES[m] for m in MODELS if m != model_id]
    other_models_str = ", ".join(other_models)

    return f'''BENCHMARK INFO:
- The optimal path from {start_title} to {target_title} is {best_path_length} clicks
- All other models ({other_models_str}) achieved the optimal {best_path_length} clicks

Clicks so far: {clicks_so_far} / 30

'''

def get_tips_preamble(tips: str) -> str:
    """Tips preamble added to system prompt."""
    return f'''TIPS FROM YOUR PREVIOUS ATTEMPTS:
The following advice was generated by you (this same model) after playing this game. Use these insights to improve your performance:

{tips}

'''

def get_tips_request_prompt(won: bool, path_taken: list[str], target: str) -> str:
    """Prompt to ask model for tips after an attempt."""
    outcome = "successfully reached" if won else "failed to reach"
    path_str = " -> ".join(path_taken)
    return f'''You just {outcome} the target article "{target}".
Your path was: {path_str}

Based on this experience, what advice would you give to future players of the Wikipedia Game?
Focus on strategies for finding efficient paths between articles.
Keep your advice concise (2-3 paragraphs max).'''
